https://github.com/goaop/framework


Q1.模拟实现一个合适的aop例子，尽量表现aop优点，说明aop的应用场景

缓存，日志，异常处理，权限检查等逻辑分散穿插于项目代码各处，无法分离出来

缺点：

-  无法复用

-  难以理解类的最初职能，逻辑杂乱

-  很容易出错，如果忘记写这些样板（biolerplate）代码的话

-  有违DRY原则，每个逻辑块都穿插着这些面熟的代码


#AOP(Aspect-Oriented Programming)

##术语（Glossary）

切面（Aspect）：横切关注点的模块化，比如上边提到的日志组件。可以认为是增强、引入和切入点的组合；在AOP中表示为“在哪里做和做什么集合”；例如日志、缓存、传输管理

Join point（连接点）：表示需要在程序中插入横切关注点的扩展点，连接点可能是类初始化、方法执行、方法调用、字段调用或处理异常等等，在AOP中表示为“在哪里做”；执行期的一个点，例如方法执行或者属性访问

增强（Advice）：或称为增强在连接点上执行的行为，增强提供了在AOP中需要在切入点所选择的连接点处进行扩展现有行为的手段；包括前置增强（before advice）、后置增强 (after advice)、环绕增强 （around advice）；在AOP中表示为“做什么”；切面在特定连接点处的动作

切入点（Pointcut）：选择一组相关连接点的模式，即可以认为连接点的集合，Spring支持perl5正则表达式和AspectJ切入点模式，Spring默认使用AspectJ语法，在AOP中表示为“在哪里做的集合”；用来匹配连接点的正则表达式，增强都有相关的切入点表达式，在任何与之匹配的连接点处执行，例如，某个特定名称的方法的执行

引入（Introduction）：也称为内部类型声明（inter-type declaration），为已有的类添加额外新的字段或方法，在AOP中表示为“做什么（新增什么）”；

Weaving（织入）：织入是一个过程，是将切面应用到目标对象从而创建出AOP代理对象的过程，织入可以在编译期、类装载期、运行期进行。把切面和其它应用程序类型或者对象链接起来，以创建增强对象。这个过程可以在任何时候完成

目标对象（Target Object）：需要被织入横切关注点的对象，即该对象是切入点选择的对象，需要被增强的对象，从而也可称为“被增强对象”；在AOP中表示为“对谁做”；

AOP代理（AOP Proxy）：AOP框架使用代理模式创建的对象，从而实现在连接点处插入增强（即应用切面），就是通过代理来对目标对象应用切面

切入点是连接点形成的集合

使用AOP时需要关注的是连接点和切入点，前者是“想在哪个位置插入逻辑”，后者是“想在哪块区域插入逻辑（区域由位置组成）”，再切入并注册advice，添加前置后置逻辑

###Advice类型

前置增强（Before advice）：在某连接点之前执行的增强，但这个增强不能阻止连接点前的执行（除非它抛出一个异常）。

后置返回增强（After returning advice）：在某连接点正常完成后执行的增强：例如，一个方法没有抛出任何异常，正常返回。

后置异常增强（After throwing advice）：在方法抛出异常退出时执行的增强。

后置最终增强（After (finally) advice）：当某连接点退出的时候执行的增强（不论是正常返回还是异常退出）。

环绕增强（Around Advice）：围绕一个连接点的增强，如方法调用。这是最强大的一种增强类型。环绕增强可以在方法调用前后完成自定义的行为。它也负责选择是继续执行连接点，还是直接返回它们自己的返回值或者抛出异常来结束执行。

##作用

AOP能够将那些与业务无关，却为业务模块所共同调用的逻辑或责任，例如事务处理、日志管理、权限控制等，封装起来，便于减少系统的重复代码，降低模块间的耦合度，并有利于未来的可操作性和可维护性。